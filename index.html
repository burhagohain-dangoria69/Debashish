<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASSEB Kamrup (M) - Exam Routine Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .subject-select {
            transition: all 0.3s ease;
        }
        
        .subject-select:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .routine-table {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .routine-table th {
            background-color: #3b82f6;
            color: white;
        }
        
        .routine-table tr:nth-child(even) {
            background-color: #f8fafc;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-3xl">
        <!-- Header -->
        <header class="text-center mb-10 fade-in">
            <div class="bg-white rounded-xl shadow-md p-6 mb-4 card">
                <h1 class="text-3xl md:text-4xl font-bold text-blue-800 mb-2">ASSEB Kamrup (M) District</h1>
                <h2 class="text-xl md:text-2xl font-semibold text-gray-700 mb-4">Class XI Half-Yearly Exam Routine Generator (2025-26)</h2>
                <p class="text-gray-600">Select your 6 subjects to generate your personalized exam schedule</p>
            </div>
        </header>

        <!-- Subject Selection Form -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8 fade-in card">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">Select Your Subjects</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <!-- Elective 1 -->
                <div>
                    <label class="block text-gray-700 mb-2 font-medium">Elective 1</label>
                    <select id="elective1" class="subject-select w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">-- Select Subject --</option>
                    </select>
                </div>
                
                <!-- Elective 2 -->
                <div>
                    <label class="block text-gray-700 mb-2 font-medium">Elective 2</label>
                    <select id="elective2" class="subject-select w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">-- Select Subject --</option>
                    </select>
                </div>
                
                <!-- Elective 3 -->
                <div>
                    <label class="block text-gray-700 mb-2 font-medium">Elective 3</label>
                    <select id="elective3" class="subject-select w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">-- Select Subject --</option>
                    </select>
                </div>
                
                <!-- Elective 4 -->
                <div>
                    <label class="block text-gray-700 mb-2 font-medium">Elective 4</label>
                    <select id="elective4" class="subject-select w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">-- Select Subject --</option>
                    </select>
                </div>
                
                <!-- Language (English) -->
                <div>
                    <label class="block text-gray-700 mb-2 font-medium">Language (English)</label>
                    <select id="language" class="subject-select w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-100" disabled>
                        <option value="English">English</option>
                    </select>
                </div>
                
                <!-- MIL -->
                <div>
                    <label class="block text-gray-700 mb-2 font-medium">MIL</label>
                    <select id="mil" class="subject-select w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">-- Select MIL --</option>
                    </select>
                </div>
            </div>
            
            <div class="flex justify-center">
                <button id="generateBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition duration-300 transform hover:-translate-y-1 shadow-md flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Generate Routine
                </button>
            </div>
        </div>

        <!-- Generated Routine -->
        <div id="routineContainer" class="bg-white rounded-xl shadow-md p-6 mb-8 hidden fade-in card">
            <div class="flex flex-col md:flex-row justify-between items-center mb-4 gap-4">
                <h3 class="text-xl font-semibold text-gray-800">Your Exam Routine</h3>
                <button id="downloadBtn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition duration-300 shadow-md flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                    Download PDF
                </button>
            </div>
            
            <div id="routineTable" class="overflow-x-auto">
                <!-- Routine table will be generated here -->
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-600 mt-12 pt-6 border-t border-gray-200">
            <p>Made with ❤️ by Debashish (Science)</p>
        </footer>
    </div>

    <script>
        // Official Exam Timetable Data
        const examTimetable = [
            { date: '10-11-2025', morning: 'English', afternoon: 'Psychology / Sales Management & Advertising' },
            { date: '11-11-2025', morning: 'Environmental Education', afternoon: 'Statistics' },
            { date: '12-11-2025', morning: 'Education / Physics / Finance', afternoon: 'Swadesh Adhyayan' },
            { date: '13-11-2025', morning: 'Chemistry / Political Science / Business Mathematics & Statistics', afternoon: '' },
            { date: '17-11-2025', morning: 'MIL / Alternative English', afternoon: 'Computer Science & Application' },
            { date: '18-11-2025', morning: 'Accountancy / History', afternoon: 'Mathematics / Multimedia & Web Technology' },
            { date: '19-11-2025', morning: 'Entrepreneurship Development', afternoon: 'Biology / Sociology' },
            { date: '20-11-2025', morning: 'Anthropology', afternoon: 'Financial Literacy' },
            { date: '21-11-2025', morning: 'Geography', afternoon: 'Geology' },
            { date: '22-11-2025', morning: 'Economics', afternoon: 'Sanskrit' },
            { date: '25-11-2025', morning: 'Community Science', afternoon: 'Logic & Philosophy / Insurance' },
            { date: '26-11-2025', morning: 'Business Studies / Economic Geography', afternoon: 'Skill Subject (Group-C)' }
        ];

        // All available subjects (alphabetically sorted, excluding MIL subjects)
        const allSubjects = [
            'Accountancy',
            'Anthropology',
            'Biology',
            'Business Mathematics & Statistics',
            'Business Studies',
            'Chemistry',
            'Community Science',
            'Computer Science & Application',
            'Economics',
            'Education',
            'Entrepreneurship Development',
            'Environmental Education',
            'Finance',
            'Financial Literacy',
            'Geography',
            'Geology',
            'History',
            'Insurance',
            'Logic & Philosophy',
            'Mathematics',
            'Multimedia & Web Technology',
            'Physics',
            'Political Science',
            'Psychology',
            'Sales Management & Advertising',
            'Sanskrit',
            'Sociology',
            'Statistics',
            'Swadesh Adhyayan'
        ].sort();

        // MIL subjects
        const milSubjects = [
            'Alternative English',
            'Assamese',
            'Bengali',
            'Hindi'
        ].sort();

        // Initialize the subject dropdowns
        document.addEventListener('DOMContentLoaded', function() {
            const elective1 = document.getElementById('elective1');
            const elective2 = document.getElementById('elective2');
            const elective3 = document.getElementById('elective3');
            const elective4 = document.getElementById('elective4');
            const milDropdown = document.getElementById('mil');
            
            // Populate all dropdowns with subjects (alphabetically sorted)
            [elective1, elective2, elective3, elective4].forEach(dropdown => {
                allSubjects.forEach(subject => {
                    const option = document.createElement('option');
                    option.value = subject;
                    option.textContent = subject;
                    dropdown.appendChild(option);
                });
            });
            
            // Populate MIL dropdown
            milSubjects.forEach(subject => {
                const option = document.createElement('option');
                option.value = subject;
                option.textContent = subject;
                milDropdown.appendChild(option);
            });
            
            // Add event listeners to prevent duplicate selections
            const allDropdowns = [elective1, elective2, elective3, elective4, milDropdown];
            
            allDropdowns.forEach(dropdown => {
                dropdown.addEventListener('change', function() {
                    updateDropdownOptions();
                });
            });
            
            // Generate routine button
            document.getElementById('generateBtn').addEventListener('click', generateRoutine);
            
            // Download PDF button
            document.getElementById('downloadBtn').addEventListener('click', downloadPDF);
        });

        // Update dropdown options to prevent duplicates
        function updateDropdownOptions() {
            const allDropdowns = [
                document.getElementById('elective1'),
                document.getElementById('elective2'),
                document.getElementById('elective3'),
                document.getElementById('elective4'),
                document.getElementById('mil')
            ];
            
            const selectedValues = allDropdowns.map(dropdown => dropdown.value);
            
            allDropdowns.forEach((dropdown, index) => {
                const currentValue = dropdown.value;
                
                // Enable all options first
                Array.from(dropdown.options).forEach(option => {
                    option.disabled = false;
                });
                
                // Disable selected values in other dropdowns
                allDropdowns.forEach((otherDropdown, otherIndex) => {
                    if (index !== otherIndex && otherDropdown.value) {
                        Array.from(dropdown.options).forEach(option => {
                            if (option.value === otherDropdown.value && option.value !== '') {
                                option.disabled = true;
                            }
                        });
                    }
                });
                
                // If current value is disabled (because it was selected elsewhere), reset it
                if (currentValue && dropdown.options[dropdown.selectedIndex].disabled) {
                    dropdown.value = '';
                }
            });
        }

        // Generate the exam routine
        function generateRoutine() {
            const elective1 = document.getElementById('elective1').value;
            const elective2 = document.getElementById('elective2').value;
            const elective3 = document.getElementById('elective3').value;
            const elective4 = document.getElementById('elective4').value;
            const language = document.getElementById('language').value;
            const mil = document.getElementById('mil').value;
            
            // Check if all subjects are selected
            if (!elective1 || !elective2 || !elective3 || !elective4 || !mil) {
                alert('Please select all 6 subjects before generating your routine.');
                return;
            }
            
            // Get all selected subjects
            const selectedSubjects = [elective1, elective2, elective3, elective4, language, mil, 'Environmental Education'];
            
            // Find exam dates for selected subjects
            const studentRoutine = [];
            
            examTimetable.forEach(day => {
                const morningSubjects = day.morning.split(' / ');
                const afternoonSubjects = day.afternoon.split(' / ');
                
                // Check morning session
                morningSubjects.forEach(subject => {
                    if (selectedSubjects.includes(subject.trim())) {
                        studentRoutine.push({
                            date: day.date,
                            subject: subject.trim(),
                            time: '10:00 AM - 12:00 Noon'
                        });
                    }
                });
                
                // Check afternoon session
                afternoonSubjects.forEach(subject => {
                    if (subject.trim() && selectedSubjects.includes(subject.trim())) {
                        studentRoutine.push({
                            date: day.date,
                            subject: subject.trim(),
                            time: '1:00 PM - 3:00 PM'
                        });
                    }
                });
            });
            
            // Sort by date
            studentRoutine.sort((a, b) => {
                const dateA = new Date(a.date.split('-').reverse().join('-'));
                const dateB = new Date(b.date.split('-').reverse().join('-'));
                return dateA - dateB;
            });
            
            // Display the routine
            displayRoutine(studentRoutine);
        }

        // Display the generated routine
        function displayRoutine(routine) {
            const routineContainer = document.getElementById('routineContainer');
            const routineTable = document.getElementById('routineTable');
            
            // Create table HTML
            let tableHTML = `
                <table class="routine-table w-full border-collapse rounded-lg overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-3 px-4 text-left">Date</th>
                            <th class="py-3 px-4 text-left">Subject</th>
                            <th class="py-3 px-4 text-left">Time</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            if (routine.length === 0) {
                tableHTML += `
                    <tr>
                        <td colspan="3" class="py-4 px-4 text-center text-gray-500">
                            No exams found for your selected subjects.
                        </td>
                    </tr>
                `;
            } else {
                routine.forEach(exam => {
                    tableHTML += `
                        <tr class="border-b border-gray-200 hover:bg-blue-50 transition-colors">
                            <td class="py-3 px-4">${exam.date}</td>
                            <td class="py-3 px-4 font-medium">${exam.subject}</td>
                            <td class="py-3 px-4">${exam.time}</td>
                        </tr>
                    `;
                });
            }
            
            tableHTML += `
                    </tbody>
                </table>
            `;
            
            routineTable.innerHTML = tableHTML;
            routineContainer.classList.remove('hidden');
            
            // Scroll to routine
            routineContainer.scrollIntoView({ behavior: 'smooth' });
        }

        // Download routine as PDF
        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add header
            doc.setFontSize(16);
            doc.setTextColor(30, 64, 175);
            doc.text('ASSEB Kamrup (M) District - Class XI Exam Routine', 20, 20);
            
            doc.setFontSize(12);
            doc.setTextColor(75, 85, 99);
            doc.text('Half-Yearly Examination 2025-26', 20, 30);
            
            // Get selected subjects
            const elective1 = document.getElementById('elective1').value;
            const elective2 = document.getElementById('elective2').value;
            const elective3 = document.getElementById('elective3').value;
            const elective4 = document.getElementById('elective4').value;
            const language = document.getElementById('language').value;
            const mil = document.getElementById('mil').value;
            
            // Add student info
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            doc.text(`Electives: ${elective1}, ${elective2}, ${elective3}, ${elective4}`, 20, 45);
            doc.text(`Language: ${language}, MIL: ${mil}`, 20, 52);
            
            // Add table headers
            doc.setFillColor(59, 130, 246);
            doc.setTextColor(255, 255, 255);
            doc.rect(20, 65, 170, 10, 'F');
            doc.text('Date', 22, 71);
            doc.text('Subject', 70, 71);
            doc.text('Time', 140, 71);
            
            // Get routine data
            const routineRows = document.querySelectorAll('#routineTable tbody tr');
            let yPosition = 80;
            
            doc.setTextColor(0, 0, 0);
            
            routineRows.forEach(row => {
                const cells = row.querySelectorAll('td');
                
                if (cells.length === 3) {
                    const date = cells[0].textContent;
                    const subject = cells[1].textContent;
                    const time = cells[2].textContent;
                    
                    // Alternate row colors
                    if (yPosition % 20 === 0) {
                        doc.setFillColor(248, 250, 252);
                        doc.rect(20, yPosition - 5, 170, 10, 'F');
                    }
                    
                    doc.text(date, 22, yPosition);
                    doc.text(subject, 70, yPosition);
                    doc.text(time, 140, yPosition);
                    
                    yPosition += 10;
                    
                    // Add new page if needed
                    if (yPosition > 270) {
                        doc.addPage();
                        yPosition = 20;
                        
                        // Add headers again on new page
                        doc.setFillColor(59, 130, 246);
                        doc.setTextColor(255, 255, 255);
                        doc.rect(20, yPosition, 170, 10, 'F');
                        doc.text('Date', 22, yPosition + 6);
                        doc.text('Subject', 70, yPosition + 6);
                        doc.text('Time', 140, yPosition + 6);
                        
                        yPosition += 15;
                        doc.setTextColor(0, 0, 0);
                    }
                }
            });
            
            // Add footer
            const pageCount = doc.internal.getNumberOfPages();
            for (let i = 1; i <= pageCount; i++) {
                doc.setPage(i);
                doc.setFontSize(8);
                doc.setTextColor(100, 100, 100);
                doc.text('Generated by ASSEB Kamrup (M) Exam Routine Generator', 20, 285);
                doc.text(`Page ${i} of ${pageCount}`, 180, 285, { align: 'right' });
            }
            
            // Save the PDF
            doc.save('ASSEB_Exam_Routine.pdf');
        }
    </script>
</body>
</html>
